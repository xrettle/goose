"use strict";(self.webpackChunkgoose=self.webpackChunkgoose||[]).push([[5988],{2479:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var i=t(37556),r=t(74848),o=t(28453);const a={title:"Automate Your Complex Workflows with Subrecipes in goose",description:"Did you know you can call recipes from within other recipes? Learn how to orchestrate multiple AI tasks using goose subrecipes.",authors:["ian"]},s=void 0,c={authorsImageUrls:[void 0]},l=[{value:"Why Subrecipes Matter",id:"why-subrecipes-matter",level:2},{value:"A Real-World Example: Project Setup Automation",id:"a-real-world-example-project-setup-automation",level:2},{value:"Specialized Subrecipes for Different Tasks",id:"specialized-subrecipes-for-different-tasks",level:2},{value:"Image Generation with OpenAI DALL-E",id:"image-generation-with-openai-dall-e",level:3},{value:"Code Generation with Claude Sonnet",id:"code-generation-with-claude-sonnet",level:3},{value:"README Generation with Gemini",id:"readme-generation-with-gemini",level:3},{value:"Debugging Tips for Subrecipes",id:"debugging-tips-for-subrecipes",level:2},{value:"1. Make Sure Each Recipe Runs Independently",id:"1-make-sure-each-recipe-runs-independently",level:3},{value:"2. Use recipe_dir for Relative Paths",id:"2-use-recipe_dir-for-relative-paths",level:3},{value:"3. Parameter Validation is Your Friend",id:"3-parameter-validation-is-your-friend",level:3},{value:"4. Add Retry Logic for Flaky Operations",id:"4-add-retry-logic-for-flaky-operations",level:3},{value:"5. Monitor Resource Usage",id:"5-monitor-resource-usage",level:3},{value:"More Subrecipe Workflows",id:"more-subrecipe-workflows",level:2},{value:"The Future of Orchestrated AI",id:"the-future-of-orchestrated-ai",level:2},{value:"Share Your Recipes with Us!",id:"share-your-recipes-with-us",level:2}];function p(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Head:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"goose Subrecipes",src:t(56336).A+"",width:"1206",height:"633"})}),"\n",(0,r.jsx)(n.p,{children:"Remember when you first learned to cook? You probably started with simple recipes like scrambled eggs or toast. But eventually you wanted to make something more complex, like a full dinner with multiple dishes. That's how subrecipes work in goose: each recipe can run stand-alone for a dedicated task, and a main recipe can orchestrate how they run."}),"\n",(0,r.jsxs)(n.p,{children:["Let's explore ",(0,r.jsx)(n.a,{href:"/docs/tutorials/sub-recipes-in-parallel",children:"goose subrecipes"}),' together! You\'re about to learn know how to orchestrate multiple AI models, coordinate tasks, and build workflows that will turn you into a "head chef" user with goose.']}),"\n",(0,r.jsx)(n.h2,{id:"why-subrecipes-matter",children:"Why Subrecipes Matter"}),"\n",(0,r.jsx)(n.p,{children:"Think of subrecipes like having a team of specialized chefs in your kitchen. One chef is amazing at making desserts, another excels at grilling, and a third is the salad master. Instead of having one person try to do everything, you let each specialist focus on what they do best."}),"\n",(0,r.jsx)(n.p,{children:"That's exactly what subrecipes do for your goose workflows. You can have one recipe that's optimized for creative tasks like image generation, another that's perfect for technical documentation, and a third that excels at writing code. Then you orchestrate them all from a main recipe."}),"\n",(0,r.jsx)(n.h2,{id:"a-real-world-example-project-setup-automation",children:"A Real-World Example: Project Setup Automation"}),"\n",(0,r.jsx)(n.p,{children:"I built a project setup system that creates a complete project with documentation, logo generator, and an initial codebase. Instead of one massive recipe trying to do everything, I broke it into specialized pieces."}),"\n",(0,r.jsx)(n.p,{children:"Here's the parent recipe that orchestrates everything:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: 1.0.0\ntitle: "Complete Project Setup"\ndescription: "Creates a full project with README, image, and code using specialized models"\ninstructions: |\n  You are a project orchestrator. Execute the subrecipes to create a complete project setup.\n  Each subrecipe is specialized for its task and uses the optimal model and instructions for that work.\n  \n  EXECUTION ORDER: \n  - Run image-creator and code-writer first, in parallel\n  - When they both succeed and finish, then run readme-generator; don\'t make the readme until we have a logo and finished code project to reference\n\nprompt: |\n  Create a complete project setup for: {{ project_name }} within ./project\n  \n  Execute these tasks:\n  - Create a project logo/image  \n  - Write the initial codebase\n  - Generate project documentation\n  \n  Project details:\n  - Name: {{ project_name }}\n  - Language: {{ language }}\n  - Description: {{ description }}\n\nparameters:\n  - key: project_name\n    input_type: string\n    requirement: required\n    description: "Name of the project to create"\n    \n  - key: language\n    input_type: string\n    requirement: optional\n    description: "Programming language to use"\n    default: python\n    \n  - key: description\n    input_type: string\n    requirement: required\n    description: "Project description"\n\nsub_recipes:\n\n  - name: "image-creator" \n    path: "{{ recipe_dir }}/2-image.yaml"\n    description: "Create project logo using GPT"\n    values:\n      project_name: "{{ project_name }}"\n      description: "{{ description }}"\n      \n  - name: "code-writer"\n    path: "{{ recipe_dir }}/3-code.yaml" \n    description: "Write initial code using Claude"\n    values:\n      project_name: "{{ project_name }}"\n      language: "{{ language }}"\n      description: "{{ description }}"\n\n  - name: "readme-generator"\n    path: "{{ recipe_dir }}/1-readme.yaml"\n    description: "Generate comprehensive README using Gemini"\n    sequential_when_repeated: true\n    values:\n      project_name: "{{ project_name }}"\n      description: "{{ description }}"\n      language: "{{ language }}"\n    \n\nextensions:\n  - type: builtin\n    name: developer\n'})}),"\n",(0,r.jsx)(n.p,{children:"Notice how each subrecipe gets only the parameters it needs, and we can control the execution order in our prompt."}),"\n",(0,r.jsxs)(n.p,{children:["By default, subrecipes run in ",(0,r.jsx)(n.em,{children:"parallel"}),". This is like having multiple chefs working simultaneously in different parts of the kitchen. The image generation and code writing happen at the same time, cutting your total execution time."]}),"\n",(0,r.jsx)(n.p,{children:"Sometimes you need things to happen in order. The best approach here is to list the specific order you want in the recipe instructions. In this example, I want the image and code generation to happen in parallel (because they don't depend on each other), and only run the README generation when the other two steps are both successful so it can reference the generated files."}),"\n",(0,r.jsx)(n.h2,{id:"specialized-subrecipes-for-different-tasks",children:"Specialized Subrecipes for Different Tasks"}),"\n",(0,r.jsx)(n.p,{children:"Each subrecipe is optimized for its specific job."}),"\n",(0,r.jsx)(n.h3,{id:"image-generation-with-openai-dall-e",children:"Image Generation with OpenAI DALL-E"}),"\n",(0,r.jsx)(n.p,{children:"For the image generation, we could use an image generator MCP system in a smaller recipe. For this example, though, I'm going to have this recipe write a specific script to call OpenAI's DALL-E API directly. This gives me more control over the image generation process and avoids external resources."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: 1.0.0\ntitle: "Project Image Creator"\ndescription: "Generate project logos and images"\n\nsettings:\n  goose_provider: "databricks"\n  goose_model: "goose-claude-4-sonnet"\n  temperature: 0.1\n\ninstructions: |\n  You are a creative designer specializing in logo and image creation.\n  Create visually appealing, professional images that represent the project\'s purpose.\n\n  Generate images using OpenAI\'s DALL-E API\n\nactivities:\n  - Generate images using DALL-E API\n  - Save images to specified locations\n  - Handle API errors gracefully\n\nprompt: |\n  Create a project logo/image for "{{ project_name }}" - {{ description }}.\n\n  Your working folder is "{{recipe_dir}}/project/"\n  \n  Task: Generate an image using OpenAI\'s DALL-E API directly via Python script.\n\n  Image specifications:\n  - Size: 1024x1024\n  - Quality: standard\n  - Output file: "logo.png"\n\n  - Modern, professional design suitable for a tech API\n  - Include themed elements based on project description: {{ description}}\n  - Professional color scheme\n  - High quality and suitable for documentation\n\n  Steps:\n  1. First, verify the OPENAI_API_KEY environment variable is set\n  2. Create a Python script:\n    - the filename should be "./project/logo_generator.py", create that file and edit it in place\n    - it should calls OpenAI\'s DALL-E API directly to generate an image\n    - the output folder to store the image is the same folder in which the logo_generator.py script exists\n    - for example, the final image should be "./project/logo.png" but not have the "./project" path hard-coded in the script\n  3. Execute the script to generate the image with the specified parameters\n  4. Verify the image was created successfully and report the file location\n  5. If there are any errors, provide clear troubleshooting guidance\n\n  Implementation approach:\n  - Use the developer extension to create and run a Python script\n  - The script should use only standard library modules (urllib, json, base64) to avoid dependency issues\n  - Call OpenAI\'s DALL-E 3 API directly with proper authentication\n  - Handle API responses and save the base64-encoded image to the specified location\n  - Provide detailed error messages for troubleshooting\n\n  Requirements:\n  - The OPENAI_API_KEY environment variable must be set\n  - Handle any API errors gracefully and provide helpful error messages\n\nretry:\n  max_retries: 3\n  checks:\n    - type: shell\n      command: test -f "{{recipe_dir}}/project/logo_generator.py"\n    - type: shell\n      command: test -f "{{recipe_dir}}/project/logo.png"\n  on_failure: rm -f "{{recipe_dir}}/project/logo.png" && rm -rf "{{recipe_dir}}/project/logo_generator.py"\n  timeout_seconds: 60  \n\nextensions:\n  - type: builtin\n    name: developer\n\nparameters:\n  - key: project_name\n    input_type: string\n    requirement: required\n    description: "Project name for the logo"\n  - key: description\n    input_type: string\n    requirement: required\n    description: "What the project is about"\n'})}),"\n",(0,r.jsx)(n.p,{children:"If you did want more creativity, you could use an image generation MCP server and use a model that's optimized for artistic image creation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'settings:\n  goose_provider: "openai"\n  goose_model: "gpt-4o"\n  temperature: 0.8\n'})}),"\n",(0,r.jsx)(n.h3,{id:"code-generation-with-claude-sonnet",children:"Code Generation with Claude Sonnet"}),"\n",(0,r.jsx)(n.p,{children:'The code generation recipe uses Claude for technical precision. We set a low "temperature" value to ensure the generated code is reliable and follows best practices.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: 1.0.0\ntitle: "Code Generator"\ndescription: "Write initial project codebase"\n\nsettings:\n  goose_provider: "anthropic"\n  goose_model: "claude-sonnet-4"\n  temperature: 0.1\n\ninstructions: |\n  You are a senior software engineer who writes clean, well-documented, and maintainable code.\n  Follow best practices and include comprehensive error handling and documentation.\n\nprompt: |\n  Write the initial codebase for "{{ project_name }}".\n\n  Your project folder will be ./project/\n  \n  Requirements:\n  - Language: {{ language }}\n  - Description: {{ description }}\n  - Include proper project structure\n  - Include error handling\n  - Follow language-specific best practices\n  - Add unit tests where appropriate\n\n  Documentation:\n  - Add comprehensive documentation in a file called USAGE.md\n  - do not create a README.md file\n\nextensions:\n  - type: builtin\n    name: developer\n\nparameters:\n  - key: project_name\n    input_type: string\n    requirement: required\n    description: "Project name"\n  - key: language\n    input_type: string\n    requirement: required\n    default: "python"\n    description: "Programming language"\n  - key: description\n    input_type: string\n    requirement: required\n    description: "Project description"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"readme-generation-with-gemini",children:"README Generation with Gemini"}),"\n",(0,r.jsx)(n.p,{children:"And the documentation recipe uses Gemini for comprehensive README generation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: 1.0.0\ntitle: "README Generator"\ndescription: "Generate comprehensive project documentation"\n\nsettings:\n  goose_provider: "google"\n  goose_model: "gemini-2.5-flash"\n  temperature: 0.5\n\ninstructions: |\n  You are a technical documentation specialist. Create comprehensive, well-structured README files\n  that are informative, professional, and follow best practices.\n\nprompt: |\n  Create a comprehensive README.md file for the project "{{ project_name }}".\n  \n  Project details:\n  - Name: {{ project_name }}\n  - Language: {{ language }}\n  - Description: {{ description }}\n  \n  Include sections for:\n  - Project overview and features with lots of excitement over the capabilities of the project\n  - Installation instructions\n  - Usage examples\n\n  the code and logo for this project will be in ./project; include the logo.png at the top of the readme, and instructions on running the code in the readme.\n\n  the readme file should be placed in ./project/\n\nextensions:\n  - type: builtin\n    name: developer\n\nparameters:\n  - key: project_name\n    input_type: string\n    requirement: required\n    description: "Project name"\n  - key: language\n    input_type: string\n    requirement: required\n    description: "Programming language"\n  - key: description\n    input_type: string\n    requirement: required\n    description: "Project description"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"debugging-tips-for-subrecipes",children:"Debugging Tips for Subrecipes"}),"\n",(0,r.jsx)(n.p,{children:"Debugging subrecipes is straightforward if you follow a few best practices:"}),"\n",(0,r.jsx)(n.h3,{id:"1-make-sure-each-recipe-runs-independently",children:"1. Make Sure Each Recipe Runs Independently"}),"\n",(0,r.jsx)(n.p,{children:"This is crucial. Each subrecipe should work perfectly on its own. Test them individually before combining them. If a subrecipe fails when run alone, it will definitely fail as part of a larger workflow."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Test each subrecipe individually first\ngoose run --recipe 1-readme.yaml --params project_name="test" language="python" description="test project"\ngoose run --recipe 2-image.yaml --params project_name="test" description="test project"  \ngoose run --recipe 3-code.yaml --params project_name="test" language="python" description="test project"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-use-recipe_dir-for-relative-paths",children:"2. Use recipe_dir for Relative Paths"}),"\n",(0,r.jsxs)(n.p,{children:["Always use ",(0,r.jsx)(n.code,{children:"{{ recipe_dir }}"})," for file paths within your recipes. This makes your recipes portable and prevents path issues when someone runs them from a different directory."]}),"\n",(0,r.jsx)(n.h3,{id:"3-parameter-validation-is-your-friend",children:"3. Parameter Validation is Your Friend"}),"\n",(0,r.jsx)(n.p,{children:"Include clear parameter descriptions and mark required parameters. This prevents confusing errors when someone forgets to pass a needed value."}),"\n",(0,r.jsx)(n.h3,{id:"4-add-retry-logic-for-flaky-operations",children:"4. Add Retry Logic for Flaky Operations"}),"\n",(0,r.jsx)(n.p,{children:"Network calls, file operations, and API calls can fail. Add retry logic with proper cleanup:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'retry:\n  max_retries: 3\n  checks:\n    - type: shell\n      command: test -f "expected_output.txt"\n  on_failure: rm -f "partial_output.txt"\n  timeout_seconds: 60\n'})}),"\n",(0,r.jsx)(n.h3,{id:"5-monitor-resource-usage",children:"5. Monitor Resource Usage"}),"\n",(0,r.jsx)(n.p,{children:"When running multiple subrecipes in parallel, watch your API rate limits and system resources. You might need to adjust the execution strategy for resource-intensive tasks."}),"\n",(0,r.jsx)(n.h2,{id:"more-subrecipe-workflows",children:"More Subrecipe Workflows"}),"\n",(0,r.jsx)(n.p,{children:"Start simple. Pick a complex task you do regularly and break it into 2-3 smaller pieces. Create individual recipes for each piece, test them separately, then build a parent recipe to orchestrate them."}),"\n",(0,r.jsx)(n.p,{children:"Some ideas to get you started:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Content Creation Pipeline"}),": Research, writing, editing, and formatting"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Development Workflow"}),": Code generation, testing, documentation, deployment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data Processing"}),": Collection, cleaning, analysis, visualization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Project Setup"}),": Structure creation, configuration, initial files, documentation"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"the-future-of-orchestrated-ai",children:"The Future of Orchestrated AI"}),"\n",(0,r.jsx)(n.p,{children:"Subrecipes represent something bigger than just a goose feature. They're a glimpse into how we'll work with AI in the future -- not as monolithic systems trying to do everything, but as specialized agents working together toward common goals."}),"\n",(0,r.jsx)(n.p,{children:"Each recipe becomes a reusable component that you can mix and match. Build a library of specialized recipes, then combine them in different ways for different projects. It's like having a toolkit of AI specialists ready to tackle any challenge."}),"\n",(0,r.jsx)(n.p,{children:"Ready to start building your own subrecipe workflows? The kitchen is open, and all the ingredients are waiting for you."}),"\n",(0,r.jsx)(n.h2,{id:"share-your-recipes-with-us",children:"Share Your Recipes with Us!"}),"\n",(0,r.jsxs)(n.p,{children:["Do you have a recipe you'd like to share with the community? We'd love to feature them in our ",(0,r.jsx)(n.a,{href:"https://block.github.io/goose/recipes/",children:"Recipe Cookbook"}),"!\n",(0,r.jsx)(n.strong,{children:"How to contribute:"})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/block/goose/fork",children:"Fork the goose repository"})}),"\n",(0,r.jsxs)(n.li,{children:["Add your recipe YAML file to the ",(0,r.jsx)(n.a,{href:"https://github.com/block/goose/tree/main/documentation/src/pages/recipes/data/recipes",children:(0,r.jsx)(n.code,{children:"documentation/src/pages/recipes/data/recipes/"})})," directory"]}),"\n",(0,r.jsxs)(n.li,{children:["Create a pull request following our ",(0,r.jsx)(n.a,{href:"https://github.com/block/goose/blob/main/CONTRIBUTING_RECIPES.md",children:"Recipe Contribution Guide"}),"\nBrowse ",(0,r.jsx)(n.a,{href:"https://github.com/block/goose/tree/main/documentation/src/pages/recipes/data/recipes",children:"existing recipes"})," for inspiration and formatting examples."]}),"\n"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("meta",{property:"og:title",content:"Automate Your Complex Workflows with Subrecipes in goose"}),(0,r.jsx)("meta",{property:"og:type",content:"article"}),(0,r.jsx)("meta",{property:"og:url",content:"https://block.github.io/goose/blog/2025-09-15-subrecipes-in-goose"}),(0,r.jsx)("meta",{property:"og:description",content:"Did you know you can call recipes from within other recipes? Learn how to orchestrate multiple AI tasks using goose subrecipes."}),(0,r.jsx)("meta",{property:"og:image",content:"https://block.github.io/goose/assets/images/goose-subrecipes-8a009154ceca95aeb34bf22fcc45dcca.png"}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{property:"twitter:domain",content:"block.github.io/goose"}),(0,r.jsx)("meta",{name:"twitter:title",content:"Automate Your Complex Workflows with Subrecipes in goose"}),(0,r.jsx)("meta",{name:"twitter:description",content:"Did you know you can call recipes from within other recipes? Learn how to orchestrate multiple AI tasks using goose subrecipes."}),(0,r.jsx)("meta",{name:"twitter:image",content:"https://block.github.io/goose/assets/images/goose-subrecipes-8a009154ceca95aeb34bf22fcc45dcca.png"})]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},56336:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/goose-subrecipes-8a009154ceca95aeb34bf22fcc45dcca.png"},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var i=t(96540);const r={},o=i.createContext(r);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}},37556:e=>{e.exports=JSON.parse('{"permalink":"/goose/blog/2025/09/15/subrecipes-in-goose","source":"@site/blog/2025-09-15-subrecipes-in-goose/index.md","title":"Automate Your Complex Workflows with Subrecipes in goose","description":"Did you know you can call recipes from within other recipes? Learn how to orchestrate multiple AI tasks using goose subrecipes.","date":"2025-09-15T00:00:00.000Z","tags":[],"readingTime":10.225,"hasTruncateMarker":true,"authors":[{"name":"W Ian Douglas","title":"Staff Developer Advocate","page":{"permalink":"/goose/blog/authors/ian"},"socials":{"linkedin":"https://www.linkedin.com/in/iandouglas736/","github":"https://github.com/iandouglas","bluesky":"https://bsky.app/profile/iandouglas736.com","x":"https://x.com/iandouglas736"},"imageURL":"https://avatars.githubusercontent.com/u/168030?v=4","key":"ian"}],"frontMatter":{"title":"Automate Your Complex Workflows with Subrecipes in goose","description":"Did you know you can call recipes from within other recipes? Learn how to orchestrate multiple AI tasks using goose subrecipes.","authors":["ian"]},"unlisted":false,"prevItem":{"title":"How to Choose Between Subagents and Subrecipes in goose","permalink":"/goose/blog/2025/09/26/subagents-vs-subrecipes"},"nextItem":{"title":"How to Make An MCP Server MCP-UI Compatible","permalink":"/goose/blog/2025/09/08/turn-any-mcp-server-mcp-ui-compatible"}}')}}]);