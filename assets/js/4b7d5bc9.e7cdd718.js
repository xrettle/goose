/*! For license information please see 4b7d5bc9.e7cdd718.js.LICENSE.txt */
"use strict";(self.webpackChunkgoose=self.webpackChunkgoose||[]).push([[2725],{30675:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"guides/managing-tools/tool-router","title":"Tool Selection Strategy","description":"Configure smart tool selection to load only relevant tools, improving performance with multiple extensions","source":"@site/docs/guides/managing-tools/tool-router.md","sourceDirName":"guides/managing-tools","slug":"/guides/managing-tools/tool-router","permalink":"/goose/docs/guides/managing-tools/tool-router","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Tool Selection Strategy","sidebar_label":"Tool Selection Strategy","description":"Configure smart tool selection to load only relevant tools, improving performance with multiple extensions"},"sidebar":"tutorialSidebar","previous":{"title":"Adjust Tool Output","permalink":"/goose/docs/guides/managing-tools/adjust-tool-output"},"next":{"title":"Updating Goose","permalink":"/goose/docs/guides/updating-goose"}}');var l=t(74848),s=t(28453),i=t(65537),r=t(79329),a=t(71112);const c={sidebar_position:3,title:"Tool Selection Strategy",sidebar_label:"Tool Selection Strategy",description:"Configure smart tool selection to load only relevant tools, improving performance with multiple extensions"},d=void 0,u={},h=[{value:"Tool Selection Options",id:"tool-selection-options",level:2},{value:"Disabled (Default)",id:"disabled-default",level:3},{value:"Enabled (LLM-based Strategy)",id:"enabled-llm-based-strategy",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Environment Variable Configuration",id:"environment-variable-configuration",level:2}];function g(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.admonition,{title:"Experimental Feature",type:"warning",children:(0,l.jsx)(n.p,{children:"Tool Selection Strategy is an experimental feature and currently only tested with Claude models. Behavior and configuration may change in future releases."})}),"\n",(0,l.jsxs)(n.p,{children:["When you enable an ",(0,l.jsx)(n.a,{href:"/docs/getting-started/using-extensions",children:"extension"}),", you gain access to all of its tools. For example, the Google Drive extension provides tools for reading documents, updating permissions, managing comments, and more. By default, Goose loads all tools into context when interacting with the LLM."]}),"\n",(0,l.jsx)(n.p,{children:"Enabling multiple extensions gives you access to a wider range of tools, but loading a lot of tools into context can be inefficient and confusing for the LLM. It's like having every tool in your workshop spread out on your bench when you only need one or two."}),"\n",(0,l.jsx)(n.p,{children:"To manage this more efficiently, you can enable a tool selection strategy. Instead of loading all tools for every interaction, it loads only the tools needed for your current task. This ensures that only the functionality you need is loaded into context, so you can keep more of your favorite extensions enabled. This provides:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Reduced token consumption"}),"\n",(0,l.jsx)(n.li,{children:"Improved LLM performance"}),"\n",(0,l.jsx)(n.li,{children:"Better context management"}),"\n",(0,l.jsx)(n.li,{children:"More accurate and efficient tool selection"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"tool-selection-options",children:"Tool Selection Options"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Option"}),(0,l.jsx)(n.th,{children:"Speed"}),(0,l.jsx)(n.th,{children:"Best For"}),(0,l.jsx)(n.th,{children:"How It Works"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Disabled"})}),(0,l.jsx)(n.td,{children:"Fastest"}),(0,l.jsx)(n.td,{children:"Few extensions, simple setups"}),(0,l.jsx)(n.td,{children:"Loads all tools from enabled extensions"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Enabled"})}),(0,l.jsx)(n.td,{children:"Slower"}),(0,l.jsx)(n.td,{children:"Many extensions, complex queries"}),(0,l.jsx)(n.td,{children:"Uses LLM intelligence to select relevant tools"})]})]})]}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsxs)(n.p,{children:["You can also use ",(0,l.jsx)(n.a,{href:"/docs/guides/managing-tools/tool-permissions",children:"tool permissions"})," to limit tool use."]})}),"\n",(0,l.jsx)(n.h3,{id:"disabled-default",children:"Disabled (Default)"}),"\n",(0,l.jsx)(n.p,{children:"When tool selection strategy is disabled, Goose loads all tools from enabled extensions into context. This is the traditional behavior and works well if you only have a few extensions enabled."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Simple setups with few extensions"}),"\n",(0,l.jsx)(n.li,{children:"When you want all tools available at all times"}),"\n",(0,l.jsx)(n.li,{children:"Maximum tool availability without selection logic"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"enabled-llm-based-strategy",children:"Enabled (LLM-based Strategy)"}),"\n",(0,l.jsx)(n.p,{children:"When enabled, Goose uses LLM intelligence to analyze your query and select only the most relevant tools from your enabled extensions. This reduces token consumption and improves tool selection accuracy when you have many extensions enabled."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Complex or ambiguous queries that require understanding context"}),"\n",(0,l.jsx)(n.li,{children:"Setups with many extensions enabled"}),"\n",(0,l.jsx)(n.li,{children:"When you want more accurate tool selection and reduced token usage"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:'Prompt: "help me analyze the contents of my document"'}),"\n",(0,l.jsx)(n.li,{children:"Result: Intelligently selects document reading and analysis tools while ignoring unrelated tools like calendar or email extensions"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsxs)(i.A,{groupId:"interface",children:[(0,l.jsx)(r.A,{value:"ui",label:"Goose Desktop",default:!0,children:(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Click the ",(0,l.jsx)(a.A,{className:"inline",size:16})," button in the top-left to open the sidebar"]}),"\n",(0,l.jsxs)(n.li,{children:["Click the ",(0,l.jsx)(n.code,{children:"Settings"})," button on the sidebar"]}),"\n",(0,l.jsxs)(n.li,{children:["Click the ",(0,l.jsx)(n.code,{children:"Chat"})," tab"]}),"\n",(0,l.jsxs)(n.li,{children:["Under ",(0,l.jsx)(n.code,{children:"Tool Selection Strategy"}),", choose your preferred option:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Disabled"})," - Use the default tool selection strategy"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Enabled"})," - Use LLM-based intelligence to select tools"]}),"\n"]}),"\n"]}),"\n"]})}),(0,l.jsxs)(r.A,{value:"cli",label:"Goose CLI",children:[(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Run the configuration command:"}),"\n"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:"goose configure\n"})}),(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.code,{children:"Goose Settings"}),":"]}),"\n"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:"\u250c   goose-configure\n\u2502\n\u25c6  What would you like to configure?\n\u2502  \u25cb Configure Providers\n\u2502  \u25cb Add Extension\n\u2502  \u25cb Toggle Extensions\n\u2502  \u25cb Remove Extension\n// highlight-start\n\u2502  \u25cf Goose Settings (Set the Goose Mode, Tool Output, Tool Permissions, Experiment, Goose recipe github repo and more)\n// highlight-end\n\u2514 \n"})}),(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.code,{children:"Router Tool Selection Strategy"}),":"]}),"\n"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:"\u250c   goose-configure\n\u2502\n\u25c7  What would you like to configure?\n\u2502  Goose Settings\n\u2502\n\u25c6  What setting would you like to configure?\n\u2502  \u25cb Goose Mode \n// highlight-start\n\u2502  \u25cf Router Tool Selection Strategy (Experimental: configure a strategy for auto selecting tools to use)\n// highlight-end\n\u2502  \u25cb Tool Permission \n\u2502  \u25cb Tool Output \n\u2502  \u25cb Toggle Experiment \n\u2502  \u25cb Goose recipe github repo \n\u2514 \n"})}),(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsx)(n.li,{children:"Choose whether to enable smart tool routing:"}),"\n"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:"\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Goose Settings \n\u2502\n\u25c7  What setting would you like to configure?\n\u2502  Router Tool Selection Strategy \n\u2502\n// highlight-start\n\u25c6  Would you like to enable smart tool routing?\n\u2502  \u25cf Enable Router (Use LLM-based intelligence to select tools)\n\u2502  \u25cb Disable Router\n// highlight-end\n\u2514  \n"})}),(0,l.jsx)(n.p,{children:"This example output shows that the router was enabled:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u250c   goose-configure\n\u2502\n\u25c7  What would you like to configure?\n\u2502  Goose Settings\n\u2502\n\u25c7  What setting would you like to configure?\n\u2502  Router Tool Selection Strategy\n\u2502\n\u25c7  Would you like to enable smart tool routing?\n\u2502  Enable Router\n\u2502\n\u2514  Router enabled - using LLM-based intelligence for tool selection\n"})}),(0,l.jsxs)(n.p,{children:["When the router is enabled, Goose CLI displays a message indicating when the ",(0,l.jsx)(n.code,{children:"llm_search"})," strategy is in use."]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"environment-variable-configuration",children:"Environment Variable Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["You can also configure tool selection using environment variables or in your ",(0,l.jsx)(n.a,{href:"/docs/guides/config-file",children:"configuration file"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Enable LLM-based tool selection\nexport GOOSE_ENABLE_ROUTER=true\n\n# Disable (use default behavior)\nexport GOOSE_ENABLE_ROUTER=false\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Or in your ",(0,l.jsx)(n.code,{children:"config.yaml"})," file:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"GOOSE_ENABLE_ROUTER: 'true'\n"})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(g,{...e})}):g(e)}},79329:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var o=t(34164);const l={tabItem:"tabItem_Ymn6"};var s=t(74848);function i(e){let{children:n,hidden:t,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,o.A)(l.tabItem,i),hidden:t,children:n})}},65537:(e,n,t)=>{t.d(n,{A:()=>w});var o=t(96540),l=t(34164),s=t(65627),i=t(56347),r=t(50372),a=t(30604),c=t(11861),d=t(78749);function u(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:o,default:l}}=e;return{value:n,label:t,attributes:o,default:l}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function g(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const l=(0,i.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,a.aZ)(s),(0,o.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(l.location.search);n.set(s,e),l.replace({...l.location,search:n.toString()})}),[s,l])]}function p(e){const{defaultValue:n,queryString:t=!1,groupId:l}=e,s=h(e),[i,a]=(0,o.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!g({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const o=t.find((e=>e.default))??t[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:n,tabValues:s}))),[c,u]=m({queryString:t,groupId:l}),[p,x]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,s]=(0,d.Dv)(t);return[l,(0,o.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:l}),f=(()=>{const e=c??p;return g({value:e,tabValues:s})?e:null})();(0,r.A)((()=>{f&&a(f)}),[f]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!g({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);a(e),u(e),x(e)}),[u,x,s]),tabValues:s}}var x=t(9136);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function j(e){let{className:n,block:t,selectedValue:o,selectValue:i,tabValues:r}=e;const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const n=e.currentTarget,t=a.indexOf(n),l=r[t].value;l!==o&&(c(n),i(l))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=a.indexOf(e.currentTarget)+1;n=a[t]??a[0];break}case"ArrowLeft":{const t=a.indexOf(e.currentTarget)-1;n=a[t]??a[a.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":t},n),children:r.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:o===n?0:-1,"aria-selected":o===n,ref:e=>{a.push(e)},onKeyDown:u,onClick:d,...s,className:(0,l.A)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":o===n}),children:t??n},n)}))})}function y(e){let{lazy:n,children:t,selectedValue:s}=e;const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===s));return e?(0,o.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function v(e){const n=p(e);return(0,b.jsxs)("div",{className:(0,l.A)("tabs-container",f.tabList),children:[(0,b.jsx)(j,{...n,...e}),(0,b.jsx)(y,{...n,...e})]})}function w(e){const n=(0,x.A)();return(0,b.jsx)(v,{...e,children:u(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var o=t(96540);const l={},s=o.createContext(l);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),o.createElement(s.Provider,{value:n},e.children)}},75395:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(96540);const l=(...e)=>e.filter(((e,n,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===n)).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const i=(0,o.forwardRef)((({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...d},u)=>(0,o.createElement)("svg",{ref:u,...s,width:n,height:n,stroke:e,strokeWidth:i?24*Number(t)/Number(n):t,className:l("lucide",r),...d},[...c.map((([e,n])=>(0,o.createElement)(e,n))),...Array.isArray(a)?a:[a]]))),r=(e,n)=>{const t=(0,o.forwardRef)((({className:t,...s},r)=>{return(0,o.createElement)(i,{ref:r,iconNode:n,className:l(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,t),...s});var a}));return t.displayName=`${e}`,t}},71112:(e,n,t)=>{t.d(n,{A:()=>o});const o=(0,t(75395).A)("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]])}}]);